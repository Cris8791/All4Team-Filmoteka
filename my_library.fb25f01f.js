function e(e){const t=e.map((({id:e,poster_path:t,title:n,genres:o,release_year:i,vote_average:c})=>`<div>\n    <img id="${e}" src="${t}" alt="movie poster" loading="lazy" />\n            <p class="movie-title">   ${n} </p>\n            <p class="movie-short-descr"> ${o} | ${i} | <span>${c}</span></p>\n        </div>`)).join("");document.querySelector(".movies-div").innerHTML=t}function t(e,t){value="",t.map((e=>{value+=JSON.stringify(e)+"*"})),value=value.slice(0,value.length-1),localStorage.setItem(e,value)}function n(e){var t=[];try{value=localStorage.getItem(e)}catch(e){console.error(e)}return value?value.split("*").forEach((e=>{t.push(JSON.parse(e))})):value="",t}var o,i=[],c=[],r=[],d=!0;document.addEventListener("DOMContentLoaded",(function(){i=n("filmoteka-watched"),c=n("filmoteka-queue"),e(i)}));const u=document.querySelector(".watched-btn"),l=document.querySelector(".queue-btn");u.addEventListener("click",(function(){d=!0,e(i)})),l.addEventListener("click",(function(){d=!1,e(c)}));const a=document.getElementById("closeModalBtn2"),s=document.querySelector(".bckdrp");a.addEventListener("click",(function(){s.style.display="none"})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(s.style.display="none")})),s.addEventListener("click",(function(e){e.target===s&&(s.style.display="none")}));const v=document.querySelector(".wbtn2"),m=document.querySelector(".qbtn2");v.addEventListener("click",(function(){if(o.watched){o.watched=!1,v.innerHTML="Add to watched";let e=i.findIndex((e=>e.id===o.id));i.splice(e,1)}else v.innerHTML="Remove from watched",o.watched=!0,i.push(o);t("filmoteka-watched",i),e(d?i:c)})),m.addEventListener("click",(function(){if(o.queued){o.queued=!1,m.innerHTML="Add to queue";let e=c.findIndex((e=>e.id===o.id));c.splice(e,1)}else m.innerHTML="Remove from queue",o.queued=!0,c.push(o);t("filmoteka-queue",c),e(d?i:c)})),btnsDivElem2=document.querySelector(".movdiv2"),btnsDivElem2.addEventListener("click",(function(e){r=d?i:c;const t=e.target.attributes[0].value;pos=r.findIndex((e=>t-e.id==0));const n=document.querySelector(".title-film"),u=document.querySelector(".movie-poster"),l=document.querySelector(".vote"),a=document.querySelector(".votes"),p=document.querySelector(".popularity"),y=document.querySelector(".title"),f=document.querySelector(".genres"),q=document.querySelector(".description-text");o=r[pos],n.innerHTML=o.title,u.src=o.poster_path,l.innerHTML=o.vote_average,a.innerHTML=" / "+o.vote_count,p.innerHTML=o.popularity,y.innerHTML=o.original_title,f.innerHTML=o.genres,q.innerHTML=o.overview,o.watched?v.innerHTML="Remove from watched":v.innerHTML="Add to watched";o.queued?m.innerHTML="Remove from queue":m.innerHTML="Add to queue";s.style.display="block"}));
//# sourceMappingURL=my_library.fb25f01f.js.map
