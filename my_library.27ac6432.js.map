{"mappings":"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","sources":["src/render.js","src/storage.js","src/my_library.js"],"sourcesContent":["function renderMoviesList(list) {\n  const markup = list\n    .map(({ id, poster_path, title, genres, release_year, vote_average }) => {\n      // adaug elemente in markup\n      return `<div>\n    <img id=\"${id}\" src=\"${poster_path}\" alt=\"movie poster\" loading=\"lazy\" />\n            <p class=\"movie-title\">   ${title} </p>\n            <p class=\"movie-short-descr\"> ${genres} | ${release_year} | <span>${vote_average}</span></p>\n        </div>`;\n    })\n    .join('');\n  const moviesDivElem = document.querySelector('.movies-div');\n  moviesDivElem.innerHTML = markup;\n}\n\nfunction renderPaginationButtons(crtPage, totalPages) {\n  // pag.crt\n  // 1 -> se vad        1,2,3,...,total,rgtarw\n  // 2 -> se vad lftarw,1,2,3,4,...,total,rgtarw\n  // 3 -> se vad lftarw,1,2,3,4,5,...,total,rgtarw\n  // 4 -> se vad lftarw,1,2,3,4,5,6,...,total,rgtarw\n  // 5 -> se vad lftarw,1,...,3,4,5,6,7,...,total,rgtarw\n  // creez un div cu un nr de butoane\n  // cele din extreme sunt cu sageata si sunt vizibile numai in anumite conditii\n  // pe pozitia a treia dinspre margini spre centru vor fi butoane cu \"...\" si ele vizibile numai in anumite conditii\n  // al doilea buton de la st spre dr, va fi \"1\"\n  // al doilea buton de la dr spre st va fi totalPages\n  if (totalPages === 1) return;\n  let leftMarkup = `<div class=\"buttons-div\">\n      <button id=\"lftarwBtn\">&larr;</button>\n      <button id=\"oneBtn\">1</button>\n      <button id=\"lftdotBtn\">...</button>`;\n  let rigthMarkup = `\n      <button id=\"rgtdotBtn\">...</button>\n      <button>${totalPages}</button>\n      <button id=\"rgtarwBtn\">&rarr;</button>\n    </div>`;\n  let minPage, maxPage, crtBtn;\n\n  // midMarkup\n  switch (crtPage) {\n    case 1:\n      minPage = 1;\n      maxPage = 3;\n      break;\n    case 2:\n      minPage = 1;\n      maxPage = 4;\n      break;\n    default:\n      minPage = crtPage - 2;\n      maxPage = crtPage + 2;\n  }\n  if (maxPage >= totalPages) maxPage = totalPages - 1;\n  let midMarkup = '';\n  for (let i = minPage; i <= maxPage; i++) {\n    if (i === 1) continue;\n    midMarkup += `<button>${i}</button>`;\n  }\n  let markup = leftMarkup + midMarkup + rigthMarkup;\n\n  //insert the markup beforeend of main\n  const mainElem = document.querySelector('main');\n  mainElem.insertAdjacentHTML('beforeend', markup);\n\n  //select the needed button elements\n  const lftarwBtn = document.querySelector('#lftarwBtn');\n  const lftdotBtn = document.querySelector('#lftdotBtn');\n  const rgtdotBtn = document.querySelector('#rgtdotBtn');\n  const rgtarwBtn = document.querySelector('#rgtarwBtn');\n\n  //hide the proper buttons\n  if (crtPage >= 1 && crtPage <= 4) {\n    lftdotBtn.style.display = 'none';\n    crtBtn = crtPage + 1;\n  }\n  if (crtPage === 1) {\n    lftarwBtn.style.display = 'none';\n    crtBtn = 1;\n  }\n  if (crtPage > 4) crtBtn = 6;\n  if (totalPages - maxPage < 2) rgtdotBtn.style.display = 'none';\n  if (crtPage === totalPages) rgtarwBtn.style.display = 'none';\n\n  //select the pagination container element for next actions\n  const pagContainer = document.querySelector('.buttons-div');\n}\n\nexport { renderMoviesList, renderPaginationButtons };\n","const WATCHED_KEY = 'filmoteka-watched',\n  QUEUE_KEY = 'filmoteka-queue';\n\nfunction saveMovieList(key, list) {\n  value = '';\n  list.map(item => {\n    value += JSON.stringify(item) + '*';\n  });\n  value = value.slice(0, value.length - 1);\n  localStorage.setItem(key, value);\n}\n\nfunction loadMovieList(key) {\n  var textList,\n    movieList = [];\n  try {\n    value = localStorage.getItem(key);\n  } catch (error) {\n    console.error(error);\n  }\n  if (!value) {\n    value = '';\n  } else {\n    //processing the loaded data\n    textList = value.split('*');\n    textList.forEach(item => {\n      movieList.push(JSON.parse(item));\n    });\n  }\n  return movieList;\n}\n\nexport { WATCHED_KEY, QUEUE_KEY, saveMovieList, loadMovieList };\n","import { renderMoviesList, renderPaginationButtons } from './render.js';\nimport {\n  WATCHED_KEY,\n  QUEUE_KEY,\n  saveMovieList,\n  loadMovieList,\n} from './storage.js';\n\nvar watchedList = [],\n  queueList = [],\n  movArray = [],\n  watchedActive = true;\nvar m;\n\nfunction initializeLibrary() {\n  watchedList = loadMovieList(WATCHED_KEY);\n  queueList = loadMovieList(QUEUE_KEY);\n  renderMoviesList(watchedList);\n  //   +WATCHED button become active\n}\nfunction watchedBtnClick() {\n  watchedActive = true;\n  renderMoviesList(watchedList);\n}\nfunction queueBtnClick() {\n  watchedActive = false;\n  renderMoviesList(queueList);\n}\ndocument.addEventListener('DOMContentLoaded', initializeLibrary);\nconst watchedBtn = document.querySelector('.watched-btn');\nconst queueBtn = document.querySelector('.queue-btn');\n\nwatchedBtn.addEventListener('click', watchedBtnClick);\nqueueBtn.addEventListener('click', queueBtnClick);\n\n//\n// modal section\nconst closeModalButton2 = document.getElementById('closeModalBtn2');\nconst backdrop2 = document.querySelector('.bckdrp');\ncloseModalButton2.addEventListener('click', function () {\n  backdrop2.style.display = 'none';\n});\n\ndocument.addEventListener('keydown', function (event) {\n  if (event.key === 'Escape') {\n    backdrop2.style.display = 'none';\n  }\n});\nbackdrop2.addEventListener('click', function (event) {\n  if (event.target === backdrop2) {\n    backdrop2.style.display = 'none';\n  }\n});\n\nconst watchedBtn2 = document.querySelector('.wbtn2');\nconst queueBtn2 = document.querySelector('.qbtn2');\nwatchedBtn2.addEventListener('click', watchedBtnClick2);\nqueueBtn2.addEventListener('click', queueBtnClick2);\n\nfunction watchedBtnClick2() {\n  if (m.watched) {\n    m.watched = false;\n    watchedBtn2.innerHTML = 'Add to watched';\n    let extractPos = watchedList.findIndex(movie => movie.id === m.id);\n    watchedList.splice(extractPos, 1);\n  } else {\n    watchedBtn2.innerHTML = 'Remove from watched';\n    m.watched = true;\n    watchedList.push(m);\n  }\n  saveMovieList(WATCHED_KEY, watchedList);\n  if (watchedActive) {\n    renderMoviesList(watchedList);\n  } else {\n    renderMoviesList(queueList);\n  }\n}\nfunction queueBtnClick2() {\n  if (m.queued) {\n    m.queued = false;\n    queueBtn2.innerHTML = 'Add to queue';\n    let extractPos = queueList.findIndex(movie => movie.id === m.id);\n    queueList.splice(extractPos, 1);\n  } else {\n    queueBtn2.innerHTML = 'Remove from queue';\n    m.queued = true;\n    queueList.push(m);\n  }\n  saveMovieList(QUEUE_KEY, queueList);\n  if (watchedActive) {\n    renderMoviesList(watchedList);\n  } else {\n    renderMoviesList(queueList);\n  }\n}\n// end of modal section\nbtnsDivElem2 = document.querySelector('.movdiv2');\nbtnsDivElem2.addEventListener('click', showModal2);\n\nfunction showModal2(event) {\n  if (watchedActive) {\n    movArray = watchedList;\n  } else {\n    movArray = queueList;\n  }\n  const imgId = event.target.attributes[0].value;\n  pos = movArray.findIndex(movie => imgId - movie.id === 0);\n  // fill modal content with movie data\n  const titleElem = document.querySelector('.title-film');\n  const imgElem = document.querySelector('.movie-poster');\n  const voteElem = document.querySelector('.vote');\n  const votesElem = document.querySelector('.votes');\n  const popularityElem = document.querySelector('.popularity');\n  const origTitleElem = document.querySelector('.title');\n  const genresElem = document.querySelector('.genres');\n  const overviewElem = document.querySelector('.description-text');\n\n  m = movArray[pos];\n  titleElem.innerHTML = m.title;\n  imgElem.src = m.poster_path;\n  voteElem.innerHTML = m.vote_average;\n  votesElem.innerHTML = ' / ' + m.vote_count;\n  popularityElem.innerHTML = m.popularity;\n  origTitleElem.innerHTML = m.original_title;\n  genresElem.innerHTML = m.genres;\n  overviewElem.innerHTML = m.overview;\n\n  if (m.watched) {\n    watchedBtn2.innerHTML = 'Remove from watched';\n  } else {\n    watchedBtn2.innerHTML = 'Add to watched';\n  }\n  if (m.queued) {\n    queueBtn2.innerHTML = 'Remove from queue';\n  } else {\n    queueBtn2.innerHTML = 'Add to queue';\n  }\n\n  // show modal window\n  backdrop2.style.display = 'block';\n}\n"],"names":["$7eec03c6472b26c7$export$322a725b9435eb51","list","markup","map","param","id","poster_path","title","genres","release_year","vote_average","concat","join","document","querySelector","innerHTML","$1d08c536038f3181$export$edb7ffe7281d2bea","$1d08c536038f3181$export$929e46ac3e0018f6","$1d08c536038f3181$export$d04fc1023ac0d0f4","key","value","item","JSON","stringify","slice","length","localStorage","setItem","$1d08c536038f3181$export$443605a02e185965","movieList","getItem","error","console","split","forEach","push","parse","$f5cce7b74bd6f87c$var$m","$f5cce7b74bd6f87c$var$watchedList","$f5cce7b74bd6f87c$var$queueList","$f5cce7b74bd6f87c$var$movArray","$f5cce7b74bd6f87c$var$watchedActive","addEventListener","$f5cce7b74bd6f87c$var$watchedBtn","$f5cce7b74bd6f87c$var$queueBtn","$f5cce7b74bd6f87c$var$closeModalButton2","getElementById","$f5cce7b74bd6f87c$var$backdrop2","style","display","event","target","$f5cce7b74bd6f87c$var$watchedBtn2","$f5cce7b74bd6f87c$var$queueBtn2","watched","extractPos","findIndex","movie","splice","queued","btnsDivElem2","imgId","attributes","pos","titleElem","imgElem","voteElem","votesElem","popularityElem","origTitleElem","genresElem","overviewElem","src","vote_count","popularity","original_title","overview"],"version":3,"file":"my_library.27ac6432.js.map"}