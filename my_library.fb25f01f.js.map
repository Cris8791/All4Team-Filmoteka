{"mappings":"AAAA,SAASA,EAAiBC,GACxB,MAAMC,EAASD,EACZE,KAAI,EAACC,GAAEA,EAAEC,YAAEA,EAAWC,MAAEA,EAAKC,OAAEA,EAAMC,aAAEA,EAAYC,aAAEA,KAE7C,uBACEL,WAAYC,kFACaC,qDACIC,OAAYC,aAAwBC,iCAG3EC,KAAK,IACcC,SAASC,cAAc,eAC/BC,UAAYX,C,CCT5B,SAASY,EAAcC,EAAKd,GAC1Be,MAAQ,GACRf,EAAKE,KAAIc,IACPD,OAASE,KAAKC,UAAUF,GAAQ,GAAG,IAErCD,MAAQA,MAAMI,MAAM,EAAGJ,MAAMK,OAAS,GACtCC,aAAaC,QAAQR,EAAKC,M,CAG5B,SAASQ,EAAcT,GACrB,IACEU,EAAY,GACd,IACET,MAAQM,aAAaI,QAAQX,E,CAC7B,MAAOY,GACPC,QAAQD,MAAMA,E,CAWhB,OATKX,MAIQA,MAAMa,MAAM,KACdC,SAAQb,IACfQ,EAAUM,KAAKb,KAAKc,MAAMf,GAAM,IALlCD,MAAQ,GAQHS,C,CCrBT,IAIIQ,EAJAC,EAAc,GAChBC,EAAY,GACZC,EAAW,GACXC,GAAgB,EAiBlB1B,SAAS2B,iBAAiB,oBAd1B,WACEJ,EAAcV,EDfI,qBCgBlBW,EAAYX,EDfA,mBCgBZxB,EAAiBkC,E,IAYnB,MAAMK,EAAa5B,SAASC,cAAc,gBACpC4B,EAAW7B,SAASC,cAAc,cAExC2B,EAAWD,iBAAiB,SAZ5B,WACED,GAAgB,EAChBrC,EAAiBkC,E,IAWnBM,EAASF,iBAAiB,SAT1B,WACED,GAAgB,EAChBrC,EAAiBmC,E,IAWnB,MAAMM,EAAoB9B,SAAS+B,eAAe,kBAC5CC,EAAYhC,SAASC,cAAc,WACzC6B,EAAkBH,iBAAiB,SAAS,WAC1CK,EAAUC,MAAMC,QAAU,M,IAG5BlC,SAAS2B,iBAAiB,WAAW,SAAUQ,GAC3B,WAAdA,EAAM/B,MACR4B,EAAUC,MAAMC,QAAU,O,IAG9BF,EAAUL,iBAAiB,SAAS,SAAUQ,GACxCA,EAAMC,SAAWJ,IACnBA,EAAUC,MAAMC,QAAU,O,IAI9B,MAAMG,EAAcrC,SAASC,cAAc,UACrCqC,EAAYtC,SAASC,cAAc,UACzCoC,EAAYV,iBAAiB,SAG7B,WACE,GAAIL,EAAEiB,QAAS,CACbjB,EAAEiB,SAAU,EACZF,EAAYnC,UAAY,iBACxB,IAAIsC,EAAajB,EAAYkB,WAAUC,GAASA,EAAMjD,KAAO6B,EAAE7B,KAC/D8B,EAAYoB,OAAOH,EAAY,E,MAE/BH,EAAYnC,UAAY,sBACxBoB,EAAEiB,SAAU,EACZhB,EAAYH,KAAKE,GAEnBnB,EDtEkB,oBCsESoB,GAEzBlC,EADEqC,EACeH,EAEAC,E,IAjBrBc,EAAUX,iBAAiB,SAoB3B,WACE,GAAIL,EAAEsB,OAAQ,CACZtB,EAAEsB,QAAS,EACXN,EAAUpC,UAAY,eACtB,IAAIsC,EAAahB,EAAUiB,WAAUC,GAASA,EAAMjD,KAAO6B,EAAE7B,KAC7D+B,EAAUmB,OAAOH,EAAY,E,MAE7BF,EAAUpC,UAAY,oBACtBoB,EAAEsB,QAAS,EACXpB,EAAUJ,KAAKE,GAEjBnB,EDvFY,kBCuFaqB,GAEvBnC,EADEqC,EACeH,EAEAC,E,IAIrBqB,aAAe7C,SAASC,cAAc,YACtC4C,aAAalB,iBAAiB,SAE9B,SAAoBQ,GAEhBV,EADEC,EACSH,EAEAC,EAEb,MAAMsB,EAAQX,EAAMC,OAAOW,WAAW,GAAG1C,MACzC2C,IAAMvB,EAASgB,WAAUC,GAASI,EAAQJ,EAAMjD,IAAO,IAEvD,MAAMwD,EAAYjD,SAASC,cAAc,eACnCiD,EAAUlD,SAASC,cAAc,iBACjCkD,EAAWnD,SAASC,cAAc,SAClCmD,EAAYpD,SAASC,cAAc,UACnCoD,EAAiBrD,SAASC,cAAc,eACxCqD,EAAgBtD,SAASC,cAAc,UACvCsD,EAAavD,SAASC,cAAc,WACpCuD,EAAexD,SAASC,cAAc,qBAE5CqB,EAAIG,EAASuB,KACbC,EAAU/C,UAAYoB,EAAE3B,MACxBuD,EAAQO,IAAMnC,EAAE5B,YAChByD,EAASjD,UAAYoB,EAAExB,aACvBsD,EAAUlD,UAAY,MAAQoB,EAAEoC,WAChCL,EAAenD,UAAYoB,EAAEqC,WAC7BL,EAAcpD,UAAYoB,EAAEsC,eAC5BL,EAAWrD,UAAYoB,EAAE1B,OACzB4D,EAAatD,UAAYoB,EAAEuC,SAEvBvC,EAAEiB,QACJF,EAAYnC,UAAY,sBAExBmC,EAAYnC,UAAY,iBAEtBoB,EAAEsB,OACJN,EAAUpC,UAAY,oBAEtBoC,EAAUpC,UAAY,eAIxB8B,EAAUC,MAAMC,QAAU,O","sources":["src/render.js","src/storage.js","src/my_library.js"],"sourcesContent":["function renderMoviesList(list) {\n  const markup = list\n    .map(({ id, poster_path, title, genres, release_year, vote_average }) => {\n      // adaug elemente in markup\n      return `<div>\n    <img id=\"${id}\" src=\"${poster_path}\" alt=\"movie poster\" loading=\"lazy\" />\n            <p class=\"movie-title\">   ${title} </p>\n            <p class=\"movie-short-descr\"> ${genres} | ${release_year} | <span>${vote_average}</span></p>\n        </div>`;\n    })\n    .join('');\n  const moviesDivElem = document.querySelector('.movies-div');\n  moviesDivElem.innerHTML = markup;\n}\n\nfunction renderPaginationButtons(crtPage, totalPages) {\n  // pag.crt\n  // 1 -> se vad        1,2,3,...,total,rgtarw\n  // 2 -> se vad lftarw,1,2,3,4,...,total,rgtarw\n  // 3 -> se vad lftarw,1,2,3,4,5,...,total,rgtarw\n  // 4 -> se vad lftarw,1,2,3,4,5,6,...,total,rgtarw\n  // 5 -> se vad lftarw,1,...,3,4,5,6,7,...,total,rgtarw\n  // creez un div cu un nr de butoane\n  // cele din extreme sunt cu sageata si sunt vizibile numai in anumite conditii\n  // pe pozitia a treia dinspre margini spre centru vor fi butoane cu \"...\" si ele vizibile numai in anumite conditii\n  // al doilea buton de la st spre dr, va fi \"1\"\n  // al doilea buton de la dr spre st va fi totalPages\n  if (totalPages === 1) return;\n  let leftMarkup = `<div class=\"buttons-div\">\n      <button id=\"lftarwBtn\">&larr;</button>\n      <button id=\"oneBtn\">1</button>\n      <button id=\"lftdotBtn\">...</button>`;\n  let rigthMarkup = `\n      <button id=\"rgtdotBtn\">...</button>\n      <button>${totalPages}</button>\n      <button id=\"rgtarwBtn\">&rarr;</button>\n    </div>`;\n  let minPage, maxPage, crtBtn;\n\n  // midMarkup\n  switch (crtPage) {\n    case 1:\n      minPage = 1;\n      maxPage = 3;\n      break;\n    case 2:\n      minPage = 1;\n      maxPage = 4;\n      break;\n    default:\n      minPage = crtPage - 2;\n      maxPage = crtPage + 2;\n  }\n  if (maxPage >= totalPages) maxPage = totalPages - 1;\n  let midMarkup = '';\n  for (let i = minPage; i <= maxPage; i++) {\n    if (i === 1) continue;\n    midMarkup += `<button>${i}</button>`;\n  }\n  let markup = leftMarkup + midMarkup + rigthMarkup;\n\n  //insert the markup beforeend of main\n  const mainElem = document.querySelector('main');\n  mainElem.insertAdjacentHTML('beforeend', markup);\n\n  //select the needed button elements\n  const lftarwBtn = document.querySelector('#lftarwBtn');\n  const lftdotBtn = document.querySelector('#lftdotBtn');\n  const rgtdotBtn = document.querySelector('#rgtdotBtn');\n  const rgtarwBtn = document.querySelector('#rgtarwBtn');\n\n  //hide the proper buttons\n  if (crtPage >= 1 && crtPage <= 4) {\n    lftdotBtn.style.display = 'none';\n    crtBtn = crtPage + 1;\n  }\n  if (crtPage === 1) {\n    lftarwBtn.style.display = 'none';\n    crtBtn = 1;\n  }\n  if (crtPage > 4) crtBtn = 6;\n  if (totalPages - maxPage < 2) rgtdotBtn.style.display = 'none';\n  if (crtPage === totalPages) rgtarwBtn.style.display = 'none';\n\n  //select the pagination container element for next actions\n  const pagContainer = document.querySelector('.buttons-div');\n}\n\nexport { renderMoviesList, renderPaginationButtons };\n","const WATCHED_KEY = 'filmoteka-watched',\n  QUEUE_KEY = 'filmoteka-queue';\n\nfunction saveMovieList(key, list) {\n  value = '';\n  list.map(item => {\n    value += JSON.stringify(item) + '*';\n  });\n  value = value.slice(0, value.length - 1);\n  localStorage.setItem(key, value);\n}\n\nfunction loadMovieList(key) {\n  var textList,\n    movieList = [];\n  try {\n    value = localStorage.getItem(key);\n  } catch (error) {\n    console.error(error);\n  }\n  if (!value) {\n    value = '';\n  } else {\n    //processing the loaded data\n    textList = value.split('*');\n    textList.forEach(item => {\n      movieList.push(JSON.parse(item));\n    });\n  }\n  return movieList;\n}\n\nexport { WATCHED_KEY, QUEUE_KEY, saveMovieList, loadMovieList };\n","import { renderMoviesList, renderPaginationButtons } from './render.js';\nimport {\n  WATCHED_KEY,\n  QUEUE_KEY,\n  saveMovieList,\n  loadMovieList,\n} from './storage.js';\n\nvar watchedList = [],\n  queueList = [],\n  movArray = [],\n  watchedActive = true;\nvar m;\n\nfunction initializeLibrary() {\n  watchedList = loadMovieList(WATCHED_KEY);\n  queueList = loadMovieList(QUEUE_KEY);\n  renderMoviesList(watchedList);\n  //   +WATCHED button become active\n}\nfunction watchedBtnClick() {\n  watchedActive = true;\n  renderMoviesList(watchedList);\n}\nfunction queueBtnClick() {\n  watchedActive = false;\n  renderMoviesList(queueList);\n}\ndocument.addEventListener('DOMContentLoaded', initializeLibrary);\nconst watchedBtn = document.querySelector('.watched-btn');\nconst queueBtn = document.querySelector('.queue-btn');\n\nwatchedBtn.addEventListener('click', watchedBtnClick);\nqueueBtn.addEventListener('click', queueBtnClick);\n\n//\n// modal section\nconst closeModalButton2 = document.getElementById('closeModalBtn2');\nconst backdrop2 = document.querySelector('.bckdrp');\ncloseModalButton2.addEventListener('click', function () {\n  backdrop2.style.display = 'none';\n});\n\ndocument.addEventListener('keydown', function (event) {\n  if (event.key === 'Escape') {\n    backdrop2.style.display = 'none';\n  }\n});\nbackdrop2.addEventListener('click', function (event) {\n  if (event.target === backdrop2) {\n    backdrop2.style.display = 'none';\n  }\n});\n\nconst watchedBtn2 = document.querySelector('.wbtn2');\nconst queueBtn2 = document.querySelector('.qbtn2');\nwatchedBtn2.addEventListener('click', watchedBtnClick2);\nqueueBtn2.addEventListener('click', queueBtnClick2);\n\nfunction watchedBtnClick2() {\n  if (m.watched) {\n    m.watched = false;\n    watchedBtn2.innerHTML = 'Add to watched';\n    let extractPos = watchedList.findIndex(movie => movie.id === m.id);\n    watchedList.splice(extractPos, 1);\n  } else {\n    watchedBtn2.innerHTML = 'Remove from watched';\n    m.watched = true;\n    watchedList.push(m);\n  }\n  saveMovieList(WATCHED_KEY, watchedList);\n  if (watchedActive) {\n    renderMoviesList(watchedList);\n  } else {\n    renderMoviesList(queueList);\n  }\n}\nfunction queueBtnClick2() {\n  if (m.queued) {\n    m.queued = false;\n    queueBtn2.innerHTML = 'Add to queue';\n    let extractPos = queueList.findIndex(movie => movie.id === m.id);\n    queueList.splice(extractPos, 1);\n  } else {\n    queueBtn2.innerHTML = 'Remove from queue';\n    m.queued = true;\n    queueList.push(m);\n  }\n  saveMovieList(QUEUE_KEY, queueList);\n  if (watchedActive) {\n    renderMoviesList(watchedList);\n  } else {\n    renderMoviesList(queueList);\n  }\n}\n// end of modal section\nbtnsDivElem2 = document.querySelector('.movdiv2');\nbtnsDivElem2.addEventListener('click', showModal2);\n\nfunction showModal2(event) {\n  if (watchedActive) {\n    movArray = watchedList;\n  } else {\n    movArray = queueList;\n  }\n  const imgId = event.target.attributes[0].value;\n  pos = movArray.findIndex(movie => imgId - movie.id === 0);\n  // fill modal content with movie data\n  const titleElem = document.querySelector('.title-film');\n  const imgElem = document.querySelector('.movie-poster');\n  const voteElem = document.querySelector('.vote');\n  const votesElem = document.querySelector('.votes');\n  const popularityElem = document.querySelector('.popularity');\n  const origTitleElem = document.querySelector('.title');\n  const genresElem = document.querySelector('.genres');\n  const overviewElem = document.querySelector('.description-text');\n\n  m = movArray[pos];\n  titleElem.innerHTML = m.title;\n  imgElem.src = m.poster_path;\n  voteElem.innerHTML = m.vote_average;\n  votesElem.innerHTML = ' / ' + m.vote_count;\n  popularityElem.innerHTML = m.popularity;\n  origTitleElem.innerHTML = m.original_title;\n  genresElem.innerHTML = m.genres;\n  overviewElem.innerHTML = m.overview;\n\n  if (m.watched) {\n    watchedBtn2.innerHTML = 'Remove from watched';\n  } else {\n    watchedBtn2.innerHTML = 'Add to watched';\n  }\n  if (m.queued) {\n    queueBtn2.innerHTML = 'Remove from queue';\n  } else {\n    queueBtn2.innerHTML = 'Add to queue';\n  }\n\n  // show modal window\n  backdrop2.style.display = 'block';\n}\n"],"names":["$54572758c4217ba8$export$322a725b9435eb51","list","markup","map","id","poster_path","title","genres","release_year","vote_average","join","document","querySelector","innerHTML","$3ba18441c3474097$export$d04fc1023ac0d0f4","key","value","item","JSON","stringify","slice","length","localStorage","setItem","$3ba18441c3474097$export$443605a02e185965","movieList","getItem","error","console","split","forEach","push","parse","$238d0ff6d5f21ab3$var$m","$238d0ff6d5f21ab3$var$watchedList","$238d0ff6d5f21ab3$var$queueList","$238d0ff6d5f21ab3$var$movArray","$238d0ff6d5f21ab3$var$watchedActive","addEventListener","$238d0ff6d5f21ab3$var$watchedBtn","$238d0ff6d5f21ab3$var$queueBtn","$238d0ff6d5f21ab3$var$closeModalButton2","getElementById","$238d0ff6d5f21ab3$var$backdrop2","style","display","event","target","$238d0ff6d5f21ab3$var$watchedBtn2","$238d0ff6d5f21ab3$var$queueBtn2","watched","extractPos","findIndex","movie","splice","queued","btnsDivElem2","imgId","attributes","pos","titleElem","imgElem","voteElem","votesElem","popularityElem","origTitleElem","genresElem","overviewElem","src","vote_count","popularity","original_title","overview"],"version":3,"file":"my_library.fb25f01f.js.map"}