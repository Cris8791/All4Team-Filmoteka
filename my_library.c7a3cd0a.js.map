{"mappings":"AAAA,SAASA,EAAiBC,GACxB,MAAMC,EAASD,EACZE,KAAI,EAACC,GAAEA,EAAEC,YAAEA,EAAWC,MAAEA,EAAKC,OAAEA,EAAMC,aAAEA,EAAYC,aAAEA,KAE7C,uBACEL,WAAYC,kFACaC,qDACIC,OAAYC,aAAwBC,iCAG3EC,KAAK,IACcC,SAASC,cAAc,eAC/BC,UAAYX,C,CCT5B,IAAIY,EAAQ,GAEZ,SAASC,EAAcC,EAAKf,GAC1Ba,EAAQ,GACRb,EAAKE,KAAIc,IACPH,GAASI,KAAKC,UAAUF,GAAQ,GAAG,IAErCH,EAAQA,EAAMM,MAAM,EAAGN,EAAMO,OAAS,GACtCC,aAAaC,QAAQP,EAAKF,E,CAG5B,SAASU,EAAcR,GACrB,IACES,EAAY,GACd,IACEX,EAAQQ,aAAaI,QAAQV,E,CAC7B,MAAOW,GACPC,QAAQD,MAAMA,E,CAWhB,OATKb,EAIQA,EAAMe,MAAM,KACdC,SAAQb,IACfQ,EAAUM,KAAKb,KAAKc,MAAMf,GAAM,IALlCH,EAAQ,GAQHW,C,CCvBT,IAIIQ,EAJAC,EAAc,GAChBC,EAAY,GACZC,EAAW,GACXC,GAAgB,EAiBlB,SAASC,IACHD,GACFT,QAAQW,IAAI,sBAEZxB,EDhCgB,oBC+BhBmB,EAAc,MAGdN,QAAQW,IAAI,oBAEZxB,EDnCU,kBCkCVoB,EAAY,KAGQxB,SAASC,cAAc,eAC/BC,UAAY,E,CAqC5BF,SAAS6B,iBAAiB,oBA9D1B,WACEN,EAAcV,EDfI,qBCgBlBW,EAAYX,EDfA,mBCgBZ,MAAMiB,EAAW9B,SAASC,cAAc,cAExC,GADA6B,EAASC,UAAY,qBACjBR,EAAYb,OAAS,EACvBrB,EAAiBkC,GACjBS,EAAWC,MAAMC,gBAAkB,cAC9B,CACYlC,SAASC,cAAc,kBAC/B8B,UAAY,wC,CAEvBD,EAASD,iBAAiB,QAASF,E,IAmDrC,MAAMK,EAAahC,SAASC,cAAc,gBACpCkC,EAAWnC,SAASC,cAAc,cAExC+B,EAAWH,iBAAiB,SAvC5B,WACEG,EAAWC,MAAMC,gBAAkB,UACnCC,EAASF,MAAMC,gBAAkB,cACjCR,GAAgB,EACC1B,SAASC,cAAc,cAC/B8B,UAAY,qBACrB,MAAMK,EAAWpC,SAASC,cAAc,kBACxC,GAA2B,IAAvBsB,EAAYb,OAMd0B,EAASL,UAAY,GAEvB1C,EAAiBkC,OARjB,CACEa,EAASL,UAAY,yCACC/B,SAASC,cAAc,eAC/BC,UAAY,EAGH,C,IA2B3BiC,EAASN,iBAAiB,SAvB1B,WACEM,EAASF,MAAMC,gBAAkB,UACjCF,EAAWC,MAAMC,gBAAkB,cACnCR,GAAgB,EACC1B,SAASC,cAAc,cAC/B8B,UAAY,mBACrB,MAAMK,EAAWpC,SAASC,cAAc,kBACxC,GAAyB,IAArBuB,EAAUd,OAMZ0B,EAASL,UAAY,GAGvB1C,EAAiBmC,OATjB,CACEY,EAASL,UAAY,uCACC/B,SAASC,cAAc,eAC/BC,UAAY,EAGH,C,IAc3B,MAAMmC,EAAoBrC,SAASsC,eAAe,kBAC5CC,EAAYvC,SAASC,cAAc,WACzCoC,EAAkBR,iBAAiB,SAAS,WAC1CU,EAAUN,MAAMO,QAAU,M,IAG5BxC,SAAS6B,iBAAiB,WAAW,SAAUY,GAC3B,WAAdA,EAAMpC,MACRkC,EAAUN,MAAMO,QAAU,O,IAG9BD,EAAUV,iBAAiB,SAAS,SAAUY,GACxCA,EAAMC,SAAWH,IACnBA,EAAUN,MAAMO,QAAU,O,IAI9B,MAAMG,EAAc3C,SAASC,cAAc,UACrC2C,EAAY5C,SAASC,cAAc,UACzC0C,EAAYd,iBAAiB,SAG7B,WACE,GAAIP,EAAEuB,QAAS,CACbvB,EAAEuB,SAAU,EACZF,EAAYzC,UAAY,iBACxB,IAAI4C,EAAavB,EAAYwB,WAAUC,GAASA,EAAMvD,KAAO6B,EAAE7B,KAC/D8B,EAAY0B,OAAOH,EAAY,E,MAE/BH,EAAYzC,UAAY,sBACxBoB,EAAEuB,SAAU,EACZtB,EAAYH,KAAKE,GAEnBlB,EDtHkB,oBCsHSmB,GAEzBlC,EADEqC,EACeH,EAEAC,E,IAjBrBoB,EAAUf,iBAAiB,SAoB3B,WACE,GAAIP,EAAE4B,OAAQ,CACZ5B,EAAE4B,QAAS,EACXN,EAAU1C,UAAY,eACtB,IAAI4C,EAAatB,EAAUuB,WAAUC,GAASA,EAAMvD,KAAO6B,EAAE7B,KAC7D+B,EAAUyB,OAAOH,EAAY,E,MAE7BF,EAAU1C,UAAY,oBACtBoB,EAAE4B,QAAS,EACX1B,EAAUJ,KAAKE,GAEjBlB,EDvIY,kBCuIaoB,GAEvBnC,EADEqC,EACeH,EAEAC,E,IAIAxB,SAASC,cAAc,YAC/B4B,iBAAiB,SAE9B,SAAoBY,GAClB,GAA8B,QAA1BA,EAAMC,OAAOS,SAAoB,OAEnC1B,EADEC,EACSH,EAEAC,EAEb,MAAM4B,EAAQX,EAAMC,OAAOW,WAAW,GAAGC,MACzC,IAAIC,EAAM9B,EAASsB,WAAUC,GAASI,EAAQJ,EAAMvD,IAAO,IAE3D,MAAM+D,EAAYxD,SAASC,cAAc,eACnCwD,EAAUzD,SAASC,cAAc,iBACjCyD,EAAW1D,SAASC,cAAc,SAClC0D,EAAY3D,SAASC,cAAc,UACnC2D,EAAiB5D,SAASC,cAAc,eACxC4D,EAAgB7D,SAASC,cAAc,UACvC6D,EAAa9D,SAASC,cAAc,WACpC8D,EAAe/D,SAASC,cAAc,qBAE5CqB,EAAIG,EAAS8B,GACbC,EAAUtD,UAAYoB,EAAE3B,MACxB8D,EAAQO,IAAM1C,EAAE5B,YAChBgE,EAASxD,UAAYoB,EAAExB,aACvB6D,EAAUzD,UAAY,MAAQoB,EAAE2C,WAChCL,EAAe1D,UAAYoB,EAAE4C,WAC7BL,EAAc3D,UAAYoB,EAAE6C,eAC5BL,EAAW5D,UAAYoB,EAAE1B,OACzBmE,EAAa7D,UAAYoB,EAAE8C,SAEvB9C,EAAEuB,QACJF,EAAYzC,UAAY,sBAExByC,EAAYzC,UAAY,iBAEtBoB,EAAE4B,OACJN,EAAU1C,UAAY,oBAEtB0C,EAAU1C,UAAY,eAIxBqC,EAAUN,MAAMO,QAAU,O","sources":["src/sass/js/render.js","src/sass/js/storage.js","src/sass/js/my_library.js"],"sourcesContent":["function renderMoviesList(list) {\n  const markup = list\n    .map(({ id, poster_path, title, genres, release_year, vote_average }) => {\n      // adaug elemente in markup\n      return `<div>\n    <img id=\"${id}\" src=\"${poster_path}\" alt=\"movie poster\" loading=\"lazy\" />\n            <p class=\"movie-title\">   ${title} </p>\n            <p class=\"movie-short-descr\"> ${genres} | ${release_year} | <span>${vote_average}</span></p>\n        </div>`;\n    })\n    .join('');\n  const moviesDivElem = document.querySelector('.movies-div');\n  moviesDivElem.innerHTML = markup;\n}\n\nfunction renderPaginationButtons(crtPage, totalPages) {\n  const btnsDivElem = document.querySelector('.buttons-div');\n  if (btnsDivElem !== null) btnsDivElem.remove();\n\n  // pag.crt\n  // 1 -> se vad        1,2,3,...,total,rgtarw\n  // 2 -> se vad lftarw,1,2,3,4,...,total,rgtarw\n  // 3 -> se vad lftarw,1,2,3,4,5,...,total,rgtarw\n  // 4 -> se vad lftarw,1,2,3,4,5,6,...,total,rgtarw\n  // 5 -> se vad lftarw,1,...,3,4,5,6,7,...,total,rgtarw\n  // creez un div cu un nr de butoane\n  // cele din extreme sunt cu sageata si sunt vizibile numai in anumite conditii\n  // pe pozitia a treia dinspre margini spre centru vor fi butoane cu \"...\" si ele vizibile numai in anumite conditii\n  // al doilea buton de la st spre dr, va fi \"1\"\n  // al doilea buton de la dr spre st va fi totalPages\n  if (totalPages === 1) return;\n  let leftMarkup = `<div class=\"buttons-div\">\n      <button id=\"lftarwBtn\">&larr;</button>\n      <button id=\"oneBtn\">1</button>\n      <button id=\"lftdotBtn\">...</button>`;\n  let rigthMarkup = `\n      <button id=\"rgtdotBtn\">...</button>\n      <button>${totalPages}</button>\n      <button id=\"rgtarwBtn\">&rarr;</button>\n    </div>`;\n  let minPage, maxPage, crtBtn;\n\n  // midMarkup\n  switch (crtPage) {\n    case 1:\n      minPage = 1;\n      maxPage = 3;\n      break;\n    case 2:\n      minPage = 1;\n      maxPage = 4;\n      break;\n    default:\n      minPage = crtPage - 2;\n      maxPage = crtPage + 2;\n  }\n  if (maxPage >= totalPages) maxPage = totalPages - 1;\n  let midMarkup = '';\n  for (let i = minPage; i <= maxPage; i++) {\n    if (i === 1) continue;\n    midMarkup += `<button>${i}</button>`;\n  }\n  let markup = leftMarkup + midMarkup + rigthMarkup;\n\n  //insert the markup beforeend of main\n  const mainElem = document.querySelector('main');\n  mainElem.insertAdjacentHTML('beforeend', markup);\n\n  //select the needed button elements\n  const lftarwBtn = document.querySelector('#lftarwBtn');\n  const lftdotBtn = document.querySelector('#lftdotBtn');\n  const rgtdotBtn = document.querySelector('#rgtdotBtn');\n  const rgtarwBtn = document.querySelector('#rgtarwBtn');\n\n  //hide the proper buttons\n  if (crtPage >= 1 && crtPage <= 4) {\n    lftdotBtn.style.display = 'none';\n    crtBtn = crtPage + 2;\n  }\n  if (crtPage === 1) {\n    lftarwBtn.style.display = 'none';\n    crtBtn = 2;\n  }\n  if (crtPage > 4) crtBtn = 6;\n  if (totalPages - maxPage < 2) rgtdotBtn.style.display = 'none';\n  if (crtPage === totalPages) {\n    rgtarwBtn.style.display = 'none';\n    crtBtn = 7;\n  }\n\n  //adding style to current page button\n  const currentBtn = document.querySelector(\n    `.buttons-div :nth-child(${crtBtn})`\n  );\n  currentBtn.style.backgroundColor = '#FF6B01';\n  lftarwBtn.style.backgroundColor = '#F7F7F7';\n  rgtarwBtn.style.backgroundColor = '#F7F7F7';\n\n  // const pagContainer = document.querySelector('.buttons-div');\n  // console.log(pagContainer);\n  // console.log(currentBtn);\n  // console.log(crtBtn);\n}\n\nexport { renderMoviesList, renderPaginationButtons };\n","const WATCHED_KEY = 'filmoteka-watched',\n  QUEUE_KEY = 'filmoteka-queue';\n\nlet value = '';\n\nfunction saveMovieList(key, list) {\n  value = '';\n  list.map(item => {\n    value += JSON.stringify(item) + '*';\n  });\n  value = value.slice(0, value.length - 1);\n  localStorage.setItem(key, value);\n}\n\nfunction loadMovieList(key) {\n  var textList,\n    movieList = [];\n  try {\n    value = localStorage.getItem(key);\n  } catch (error) {\n    console.error(error);\n  }\n  if (!value) {\n    value = '';\n  } else {\n    //processing the loaded data\n    textList = value.split('*');\n    textList.forEach(item => {\n      movieList.push(JSON.parse(item));\n    });\n  }\n  return movieList;\n}\n\nexport { WATCHED_KEY, QUEUE_KEY, saveMovieList, loadMovieList };\n","import { renderMoviesList, renderPaginationButtons } from './render.js';\nimport {\n  WATCHED_KEY,\n  QUEUE_KEY,\n  saveMovieList,\n  loadMovieList,\n} from './storage.js';\n\nvar watchedList = [],\n  queueList = [],\n  movArray = [],\n  watchedActive = true;\nvar m;\n\nfunction initializeLibrary() {\n  watchedList = loadMovieList(WATCHED_KEY);\n  queueList = loadMovieList(QUEUE_KEY);\n  const clearBtn = document.querySelector('.clear-btn');\n  clearBtn.innerText = 'CLEAR WATCHED LIST';\n  if (watchedList.length > 0) {\n    renderMoviesList(watchedList);\n    watchedBtn.style.backgroundColor = '#ff6b08';\n  } else {\n    const spanElem = document.querySelector('.error-message');\n    spanElem.innerText = 'Oops! Your \"watched\" library is empty!';\n  }\n  clearBtn.addEventListener('click', clearBtnClick);\n}\nfunction clearBtnClick() {\n  if (watchedActive) {\n    console.log('clear watched list');\n    watchedList = [];\n    saveMovieList(WATCHED_KEY, watchedList);\n  } else {\n    console.log('clear queue list');\n    queueList = [];\n    saveMovieList(QUEUE_KEY, queueList);\n  }\n  const moviesDivElem = document.querySelector('.movies-div');\n  moviesDivElem.innerHTML = '';\n}\nfunction watchedBtnClick() {\n  watchedBtn.style.backgroundColor = '#ff6b08';\n  queueBtn.style.backgroundColor = 'transparent';\n  watchedActive = true;\n  const clearBtn = document.querySelector('.clear-btn');\n  clearBtn.innerText = 'CLEAR WATCHED LIST';\n  const spanElem = document.querySelector('.error-message');\n  if (watchedList.length === 0) {\n    spanElem.innerText = 'Oops! Your \"watched\" library is empty!';\n    const moviesDivElem = document.querySelector('.movies-div');\n    moviesDivElem.innerHTML = '';\n    return;\n  } else {\n    spanElem.innerText = '';\n  }\n  renderMoviesList(watchedList);\n}\nfunction queueBtnClick() {\n  queueBtn.style.backgroundColor = '#ff6b08';\n  watchedBtn.style.backgroundColor = 'transparent';\n  watchedActive = false;\n  const clearBtn = document.querySelector('.clear-btn');\n  clearBtn.innerText = 'CLEAR QUEUE LIST';\n  const spanElem = document.querySelector('.error-message');\n  if (queueList.length === 0) {\n    spanElem.innerText = 'Oops! Your \"queue\" library is empty!';\n    const moviesDivElem = document.querySelector('.movies-div');\n    moviesDivElem.innerHTML = '';\n    return;\n  } else {\n    spanElem.innerText = '';\n  }\n\n  renderMoviesList(queueList);\n}\ndocument.addEventListener('DOMContentLoaded', initializeLibrary);\nconst watchedBtn = document.querySelector('.watched-btn');\nconst queueBtn = document.querySelector('.queue-btn');\n\nwatchedBtn.addEventListener('click', watchedBtnClick);\nqueueBtn.addEventListener('click', queueBtnClick);\n\n//\n// modal section\nconst closeModalButton2 = document.getElementById('closeModalBtn2');\nconst backdrop2 = document.querySelector('.bckdrp');\ncloseModalButton2.addEventListener('click', function () {\n  backdrop2.style.display = 'none';\n});\n\ndocument.addEventListener('keydown', function (event) {\n  if (event.key === 'Escape') {\n    backdrop2.style.display = 'none';\n  }\n});\nbackdrop2.addEventListener('click', function (event) {\n  if (event.target === backdrop2) {\n    backdrop2.style.display = 'none';\n  }\n});\n\nconst watchedBtn2 = document.querySelector('.wbtn2');\nconst queueBtn2 = document.querySelector('.qbtn2');\nwatchedBtn2.addEventListener('click', watchedBtnClick2);\nqueueBtn2.addEventListener('click', queueBtnClick2);\n\nfunction watchedBtnClick2() {\n  if (m.watched) {\n    m.watched = false;\n    watchedBtn2.innerHTML = 'Add to watched';\n    let extractPos = watchedList.findIndex(movie => movie.id === m.id);\n    watchedList.splice(extractPos, 1);\n  } else {\n    watchedBtn2.innerHTML = 'Remove from watched';\n    m.watched = true;\n    watchedList.push(m);\n  }\n  saveMovieList(WATCHED_KEY, watchedList);\n  if (watchedActive) {\n    renderMoviesList(watchedList);\n  } else {\n    renderMoviesList(queueList);\n  }\n}\nfunction queueBtnClick2() {\n  if (m.queued) {\n    m.queued = false;\n    queueBtn2.innerHTML = 'Add to queue';\n    let extractPos = queueList.findIndex(movie => movie.id === m.id);\n    queueList.splice(extractPos, 1);\n  } else {\n    queueBtn2.innerHTML = 'Remove from queue';\n    m.queued = true;\n    queueList.push(m);\n  }\n  saveMovieList(QUEUE_KEY, queueList);\n  if (watchedActive) {\n    renderMoviesList(watchedList);\n  } else {\n    renderMoviesList(queueList);\n  }\n}\n// end of modal section\nconst btnsDivElem2 = document.querySelector('.movdiv2');\nbtnsDivElem2.addEventListener('click', showModal2);\n\nfunction showModal2(event) {\n  if (event.target.nodeName !== 'IMG') return;\n  if (watchedActive) {\n    movArray = watchedList;\n  } else {\n    movArray = queueList;\n  }\n  const imgId = event.target.attributes[0].value;\n  var pos = movArray.findIndex(movie => imgId - movie.id === 0);\n  // fill modal content with movie data\n  const titleElem = document.querySelector('.title-film');\n  const imgElem = document.querySelector('.movie-poster');\n  const voteElem = document.querySelector('.vote');\n  const votesElem = document.querySelector('.votes');\n  const popularityElem = document.querySelector('.popularity');\n  const origTitleElem = document.querySelector('.title');\n  const genresElem = document.querySelector('.genres');\n  const overviewElem = document.querySelector('.description-text');\n\n  m = movArray[pos];\n  titleElem.innerHTML = m.title;\n  imgElem.src = m.poster_path;\n  voteElem.innerHTML = m.vote_average;\n  votesElem.innerHTML = ' / ' + m.vote_count;\n  popularityElem.innerHTML = m.popularity;\n  origTitleElem.innerHTML = m.original_title;\n  genresElem.innerHTML = m.genres;\n  overviewElem.innerHTML = m.overview;\n\n  if (m.watched) {\n    watchedBtn2.innerHTML = 'Remove from watched';\n  } else {\n    watchedBtn2.innerHTML = 'Add to watched';\n  }\n  if (m.queued) {\n    queueBtn2.innerHTML = 'Remove from queue';\n  } else {\n    queueBtn2.innerHTML = 'Add to queue';\n  }\n\n  // show modal window\n  backdrop2.style.display = 'block';\n}\n"],"names":["$05481448f0eca9a4$export$322a725b9435eb51","list","markup","map","id","poster_path","title","genres","release_year","vote_average","join","document","querySelector","innerHTML","$fcdee57e0f77c979$var$value","$fcdee57e0f77c979$export$d04fc1023ac0d0f4","key","item","JSON","stringify","slice","length","localStorage","setItem","$fcdee57e0f77c979$export$443605a02e185965","movieList","getItem","error","console","split","forEach","push","parse","$ba8c1fd4aa2a1dfb$var$m","$ba8c1fd4aa2a1dfb$var$watchedList","$ba8c1fd4aa2a1dfb$var$queueList","$ba8c1fd4aa2a1dfb$var$movArray","$ba8c1fd4aa2a1dfb$var$watchedActive","$ba8c1fd4aa2a1dfb$var$clearBtnClick","log","addEventListener","clearBtn","innerText","$ba8c1fd4aa2a1dfb$var$watchedBtn","style","backgroundColor","$ba8c1fd4aa2a1dfb$var$queueBtn","spanElem","$ba8c1fd4aa2a1dfb$var$closeModalButton2","getElementById","$ba8c1fd4aa2a1dfb$var$backdrop2","display","event","target","$ba8c1fd4aa2a1dfb$var$watchedBtn2","$ba8c1fd4aa2a1dfb$var$queueBtn2","watched","extractPos","findIndex","movie","splice","queued","nodeName","imgId","attributes","value","pos","titleElem","imgElem","voteElem","votesElem","popularityElem","origTitleElem","genresElem","overviewElem","src","vote_count","popularity","original_title","overview"],"version":3,"file":"my_library.c7a3cd0a.js.map"}