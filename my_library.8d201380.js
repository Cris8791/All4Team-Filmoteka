function e(e){const t=e.map((({id:e,poster_path:t,title:n,genres:o,release_year:r,vote_average:i})=>`<div>\n    <img id="${e}" src="${t}" alt="movie poster" loading="lazy" />\n            <p class="movie-title">   ${n} </p>\n            <p class="movie-short-descr"> ${o} | ${r} | <span>${i}</span></p>\n        </div>`)).join("");document.querySelector(".movies-div").innerHTML=t}let t="";function n(e,n){t="",n.map((e=>{t+=JSON.stringify(e)+"*"})),t=t.slice(0,t.length-1),localStorage.setItem(e,t)}function o(e){var n=[];try{t=localStorage.getItem(e)}catch(e){console.error(e)}return t?t.split("*").forEach((e=>{n.push(JSON.parse(e))})):t="",n}var r,i=[],c=[],d=[],u=!0;function l(){u?(console.log("clear watched list"),n("filmoteka-watched",i=[])):(console.log("clear queue list"),n("filmoteka-queue",c=[]));document.querySelector(".movies-div").innerHTML=""}document.addEventListener("DOMContentLoaded",(function(){i=o("filmoteka-watched"),c=o("filmoteka-queue");const t=document.querySelector(".clear-btn");if(t.innerText="CLEAR WATCHED LIST",i.length>0)e(i);else{document.querySelector(".error-message").innerText='Oops! Your "watched" library is empty!'}t.addEventListener("click",l)}));const s=document.querySelector(".watched-btn"),a=document.querySelector(".queue-btn");s.addEventListener("click",(function(){u=!0,document.querySelector(".clear-btn").innerText="CLEAR WATCHED LIST";const t=document.querySelector(".error-message");if(0!==i.length)t.innerText="",e(i);else{t.innerText='Oops! Your "watched" library is empty!';document.querySelector(".movies-div").innerHTML=""}})),a.addEventListener("click",(function(){u=!1,document.querySelector(".clear-btn").innerText="CLEAR QUEUE LIST";const t=document.querySelector(".error-message");if(0!==c.length)t.innerText="",e(c);else{t.innerText='Oops! Your "queue" library is empty!';document.querySelector(".movies-div").innerHTML=""}}));const m=document.getElementById("closeModalBtn2"),y=document.querySelector(".bckdrp");m.addEventListener("click",(function(){y.style.display="none"})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(y.style.display="none")})),y.addEventListener("click",(function(e){e.target===y&&(y.style.display="none")}));const v=document.querySelector(".wbtn2"),p=document.querySelector(".qbtn2");v.addEventListener("click",(function(){if(r.watched){r.watched=!1,v.innerHTML="Add to watched";let e=i.findIndex((e=>e.id===r.id));i.splice(e,1)}else v.innerHTML="Remove from watched",r.watched=!0,i.push(r);n("filmoteka-watched",i),e(u?i:c)})),p.addEventListener("click",(function(){if(r.queued){r.queued=!1,p.innerHTML="Add to queue";let e=c.findIndex((e=>e.id===r.id));c.splice(e,1)}else p.innerHTML="Remove from queue",r.queued=!0,c.push(r);n("filmoteka-queue",c),e(u?i:c)})),btnsDivElem2=document.querySelector(".movdiv2"),btnsDivElem2.addEventListener("click",(function(e){if("IMG"!==e.target.nodeName)return;d=u?i:c;const t=e.target.attributes[0].value;pos=d.findIndex((e=>t-e.id==0));const n=document.querySelector(".title-film"),o=document.querySelector(".movie-poster"),l=document.querySelector(".vote"),s=document.querySelector(".votes"),a=document.querySelector(".popularity"),m=document.querySelector(".title"),q=document.querySelector(".genres"),L=document.querySelector(".description-text");r=d[pos],n.innerHTML=r.title,o.src=r.poster_path,l.innerHTML=r.vote_average,s.innerHTML=" / "+r.vote_count,a.innerHTML=r.popularity,m.innerHTML=r.original_title,q.innerHTML=r.genres,L.innerHTML=r.overview,r.watched?v.innerHTML="Remove from watched":v.innerHTML="Add to watched";r.queued?p.innerHTML="Remove from queue":p.innerHTML="Add to queue";y.style.display="block"}));
//# sourceMappingURL=my_library.8d201380.js.map
